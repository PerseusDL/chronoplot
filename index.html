<!DOCTYPE html>
<html>
<meta charset="utf-8">
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<style type="text/css">
	.axis path,
	.axis line {
	    fill: none;
	    stroke: black;
	    shape-rendering: crispEdges;
	}
	
	.axis text {
	    font-family: sans-serif;
	    font-size: 11px;
	}
</style>
<script>
$.ajax({
	url: 'data/TI_Onomastic_sample.json',
	dataType: 'json',
	success: function( _data, _status ) {
		chart( _data );
	},
	error: function( _error ) {
		console.log( 'Error' );
		console.log( _error );
	}
});

function chart( _data ) {
	var width = 800;
	var height = 600;
	var padding = 50;
	
	// Build the drawing area
	var svg = d3.select( "body" ).append( "svg:svg" )
		.attr( "width", width+padding )
		.attr( "height", height+padding )
	
	var freqFn = function(d){ return d.freq }
	var dateFn = function(d){ return d.dateAH }
	
	// X variable
	var x = d3.time.scale()
		.range([ padding, width-padding ])
		.domain( [0, d3.max(_data, dateFn)-1] )
		
	var xAxis = d3.svg.axis()
		.scale( x )
		.orient( "bottom" )
		.ticks( 20 )
	
	// Y variable
	var y = d3.scale.linear()
		.range([ height-padding, padding ])
 		.domain([ 0, d3.max( _data, freqFn ) ])
		
	var yAxis = d3.svg.axis()
		.scale( y )
		.orient( "left" )
		.ticks( 5 )

	// Build the axes
	// xAxis
	svg.append("g")
		.attr("class", "x axis")
		.attr("transform", "translate(0," + (height-padding) + ")" )
		.call( xAxis )
	.append("text")
		.attr("class", "label")
		.attr("x", width-padding)
		.attr("y", 40)
		.style("text-anchor", "end")
		.text("Time");
		
	// yAxis
	svg.append("g")
		.attr("class", "y axis")
		.call( yAxis )
		.attr("transform", "translate(" + (padding) + ", 0 )" )
	.append("text")
		.attr("class", "label")
		.attr("transform", "rotate(-90)")
		.attr("y", padding*-1 )
		.attr("x", padding*-1 )
		.attr("dy", ".71em")
		.style("text-anchor", "end")
		.text("Frequency");
	
	// Plot the points
	svg.selectAll( "circle" ).data( _data ).enter()
		.append( "svg:circle" )
		.attr( "r",2 )
		.attr( "cx", function(d) { return x(dateFn(d)) })
		.attr( "cy", function(d) { return y(freqFn(d)) })
}
</script>

</body>
</html>